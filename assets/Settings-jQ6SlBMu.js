import{u as f,j as e}from"./ui-DKY0DGm9.js";import{r as o,u as N}from"./vendor-D6EYvIws.js";import{u as v}from"./utils-CDqJ1pPe.js";import{u as b}from"./UserData-CNiV9beM.js";const C=()=>{const[c,d]=o.useState(null),[m,u]=o.useState(!0),[t,i]=o.useState({notifications:!0,darkMode:!1,emailUpdates:!0,manualUpdates:!0,commentsNotification:!0,productUpdates:!1}),{t:a,language:g}=v(),{changeLanguage:h}=f(),l=N();o.useEffect(()=>{const s=()=>{try{const n=localStorage.getItem("userData"),j=localStorage.getItem("authToken");if(!n||!j){l("/login");return}const r=JSON.parse(n);d(r),r.preferences&&i({notifications:r.preferences.notifications??!0,darkMode:r.preferences.darkMode??!1,emailUpdates:r.preferences.emailUpdates??!0,manualUpdates:!0,commentsNotification:!0,productUpdates:!1})}catch(n){console.error("Error loading user settings:",n),l("/login")}finally{u(!1)}};return s(),window.addEventListener("authStateChanged",s),()=>window.removeEventListener("authStateChanged",s)},[l]);const p=()=>{if(c)try{const s={...c.preferences,...t},n=b(c.id,{preferences:s});n?(localStorage.setItem("userData",JSON.stringify(n)),d(n),document.body.classList.toggle("dark",t.darkMode),localStorage.setItem("darkMode",t.darkMode.toString()),alert("Settings saved successfully! ✨"),window.dispatchEvent(new Event("authStateChanged"))):alert("Failed to save settings")}catch(s){console.error("Error saving settings:",s),alert("Error saving settings")}},x=()=>{confirm("Are you sure you want to delete your account? This action cannot be undone and all your data will be permanently removed.")&&(localStorage.removeItem("authToken"),localStorage.removeItem("userData"),window.dispatchEvent(new Event("authStateChanged")),l("/login"))};return m?e.jsx("main",{className:"settings-page",children:e.jsx("div",{className:"settings-inner",children:e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:a("common.loading")})})}):c?e.jsx("main",{className:"settings-page",children:e.jsxs("div",{className:"settings-inner",children:[" ",e.jsxs("header",{className:"settings-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"settings-title",children:a("settings.title")}),e.jsx("p",{className:"settings-sub",children:"Manage notifications, display preferences, and account information for QuickHelp"})]}),e.jsxs("div",{className:"settings-badge",children:[e.jsx("span",{className:"settings-dot"}),e.jsxs("span",{children:["Signed in as ",c.username]})]})]})," ",e.jsxs("div",{className:"settings-grid",children:[e.jsxs("section",{className:"settings-card",children:[e.jsx("h2",{className:"settings-card-title",children:a("settings.language")}),e.jsx("p",{className:"settings-card-sub",children:"Choose your preferred language for the interface"}),e.jsxs("div",{className:"settings-row",children:[e.jsx("div",{className:"settings-row-label",children:"Interface Language"}),e.jsxs("div",{className:"settings-row-main settings-options",children:[e.jsxs("label",{className:"settings-pillOption",children:[e.jsx("input",{type:"radio",name:"language",checked:g==="en",onChange:()=>h("en")}),e.jsx("span",{children:"English"})]}),e.jsxs("label",{className:"settings-pillOption",children:[e.jsx("input",{type:"radio",name:"language",checked:g==="th",onChange:()=>h("th")}),e.jsx("span",{children:"ไทย (Thai)"})]})]})]})]})," ",e.jsxs("section",{className:"settings-card",children:[e.jsx("h2",{className:"settings-card-title",children:"Appearance"}),e.jsx("p",{className:"settings-card-sub",children:"Choose theme and content density that suits your usage"}),e.jsxs("div",{className:"settings-row",children:[e.jsx("div",{className:"settings-row-label",children:a("settings.theme")}),e.jsxs("div",{className:"settings-row-main settings-options",children:[e.jsxs("label",{className:"settings-pillOption",children:[e.jsx("input",{type:"radio",name:"theme",checked:!t.darkMode,onChange:()=>i({...t,darkMode:!1})}),e.jsx("span",{children:a("settings.light")})]}),e.jsxs("label",{className:"settings-pillOption",children:[e.jsx("input",{type:"radio",name:"theme",checked:t.darkMode,onChange:()=>i({...t,darkMode:!0})}),e.jsx("span",{children:a("settings.dark")})]})]})]})]}),e.jsxs("section",{className:"settings-card",children:[e.jsx("h2",{className:"settings-card-title",children:a("settings.notifications")}),e.jsx("p",{className:"settings-card-sub",children:"Control what notifications you receive from QuickHelp"}),e.jsxs("label",{className:"settings-toggleRow",children:[e.jsxs("div",{children:[e.jsx("div",{className:"settings-toggle-title",children:"Manual updated (favorite)"}),e.jsx("div",{className:"settings-toggle-sub",children:"Get notified when manuals you bookmarked have new versions"})]}),e.jsx("input",{type:"checkbox",checked:t.manualUpdates,onChange:s=>i({...t,manualUpdates:s.target.checked})})]}),e.jsxs("label",{className:"settings-toggleRow",children:[e.jsxs("div",{children:[e.jsx("div",{className:"settings-toggle-title",children:"Comments on my manuals"}),e.jsx("div",{className:"settings-toggle-sub",children:"Get notified when someone comments on manuals you created"})]}),e.jsx("input",{type:"checkbox",checked:t.commentsNotification,onChange:s=>i({...t,commentsNotification:s.target.checked})})]}),e.jsxs("label",{className:"settings-toggleRow",children:[e.jsxs("div",{children:[e.jsx("div",{className:"settings-toggle-title",children:a("settings.emailNotifications")}),e.jsx("div",{className:"settings-toggle-sub",children:"Receive email updates about new features and usage tips"})]}),e.jsx("input",{type:"checkbox",checked:t.emailUpdates,onChange:s=>i({...t,emailUpdates:s.target.checked})})]}),e.jsxs("label",{className:"settings-toggleRow",children:[e.jsxs("div",{children:[e.jsx("div",{className:"settings-toggle-title",children:"Product updates & tips"}),e.jsx("div",{className:"settings-toggle-sub",children:"Email updates about new features and usage techniques"})]}),e.jsx("input",{type:"checkbox",checked:t.productUpdates,onChange:s=>i({...t,productUpdates:s.target.checked})})]})]})," ",e.jsxs("section",{className:"settings-card danger",children:[e.jsx("h2",{className:"settings-card-title",children:"Danger zone"}),e.jsx("p",{className:"settings-card-sub",children:"These actions may affect your data access. Please use with caution."})," ",e.jsxs("div",{className:"settings-row",children:[e.jsxs("div",{children:[e.jsx("div",{className:"settings-toggle-title",children:"Delete account"}),e.jsx("div",{className:"settings-toggle-sub",children:"Permanently delete your account and all associated data. This action cannot be undone."})]}),e.jsx("button",{className:"settings-btn danger",onClick:x,children:"Delete Account"})]})]})]}),e.jsxs("footer",{className:"settings-footer",children:[e.jsxs("button",{className:"settings-btn primary",onClick:p,children:[a("common.save")," changes"]}),e.jsx("button",{className:"settings-btn ghost",onClick:()=>window.location.reload(),children:a("common.cancel")})]})]})}):e.jsx("main",{className:"settings-page",children:e.jsx("div",{className:"settings-inner",children:e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"User not found"})})})};export{C as default};
