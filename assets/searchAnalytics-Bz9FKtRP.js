const u="quickhelp_search_logs",i=(c,a,r=null)=>{try{const o=c?.trim();if(!o)return;const n=JSON.parse(localStorage.getItem(u)||"[]"),l={query:o,timestamp:Date.now(),resultsCount:a||0,userId:r?.id??null,role:r?.role??null};n.push(l),localStorage.setItem(u,JSON.stringify(n))}catch(o){console.error("Error logging search:",o)}},y=({days:c=7,limit:a=5}={})=>{try{const r=JSON.parse(localStorage.getItem(u)||"[]"),n=Date.now()-c*24*60*60*1e3,l=r.filter(t=>t.timestamp>=n),s={};return l.forEach(t=>{const e=t.query.toLowerCase();s[e]||(s[e]={query:t.query,count:0,noResultCount:0}),s[e].count+=1,t.resultsCount===0&&(s[e].noResultCount+=1)}),Object.values(s).sort((t,e)=>e.count-t.count).slice(0,a)}catch(r){return console.error("Error getting search stats:",r),[]}};export{y as g,i as l};
