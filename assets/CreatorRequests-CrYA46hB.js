const u="quickhelp_creator_requests",c=()=>{try{const e=localStorage.getItem(u);return e?JSON.parse(e):[]}catch(e){return console.error("Failed to load creator requests",e),[]}},i=e=>{try{localStorage.setItem(u,JSON.stringify(e))}catch(s){console.error("Failed to save creator requests",s)}},w=({userId:e,username:s,team:n="",reason:d="",types:o=[]})=>{const t=c(),a={id:Date.now(),userId:e,username:s,team:n,reason:d,types:o,status:"pending",createdAt:new Date().toISOString(),reviewedAt:null,reviewerId:null,note:null},l=[a,...t];return i(l),window.dispatchEvent(new Event("creatorRequestsChanged")),a},g=e=>c().find(n=>n.userId===parseInt(e)),q=()=>c(),I=(e,{status:s,reviewerId:n,note:d})=>{const o=c(),t=o.findIndex(a=>a.id===parseInt(e));if(t===-1)return null;const r=[...o];return r[t]={...r[t],status:s,reviewerId:n||r[t].reviewerId,reviewedAt:new Date().toISOString(),note:d||r[t].note},i(r),window.dispatchEvent(new Event("creatorRequestsChanged")),r[t]};export{w as a,q as b,g,I as u};
