import{j as e,C as B,R as S,d as f,e as U,A,T as K,f as T,F as a,B as b}from"./ui-C0p69nPY.js";import{u as _,r as g,L as q}from"./vendor-D6EYvIws.js";import{u as z}from"./utils-dQ_ya9vc.js";import{a as J,c as M}from"./UserData-CNiV9beM.js";import{u as H}from"./index-DmxUvXmh.js";const Z=()=>{const{t:s}=z(),h=_(),{login:D,logout:G}=H(),[p,O]=g.useState("login"),[x,t]=g.useState(!1),[w,l]=g.useState(""),[v,j]=g.useState(""),[o,C]=g.useState({emailOrUsername:"",password:""}),[c,y]=g.useState({username:"",email:"",password:"",confirmPassword:"",firstName:"",lastName:""}),i=(r,n)=>{const{name:m,value:d}=r.target;n==="login"?C(u=>({...u,[m]:d})):y(u=>({...u,[m]:d}))},F=async r=>{r.preventDefault(),t(!0),l(""),j("");try{if(!o.emailOrUsername||!o.password){l(s("login.fillAllFields")),t(!1);return}await new Promise(m=>setTimeout(m,1e3)),console.log("Attempting login with:",o.emailOrUsername);const n=J(o.emailOrUsername,o.password);console.log("Auth result:",n),n.success?(D(n.user,n.token),window.dispatchEvent(new Event("authStateChanged")),j(s("login.welcomeBack")),C({emailOrUsername:"",password:""}),setTimeout(()=>{n.user.role==="admin"?h("/admin-dashboard"):n.user.role==="creator"?h("/creator-dashboard"):h("/")},800)):(console.error("Login failed:",n.message),l(s("login.invalidCredentials")))}catch(n){console.error("Login error:",n),l(s("login.loginFailed"))}finally{t(!1)}},k=async r=>{r.preventDefault(),t(!0),l(""),j("");try{const{username:n,email:m,password:d,confirmPassword:u,firstName:P,lastName:L}=c;if(!n||!m||!d||!u||!P||!L){l(s("login.fillAllFields")),t(!1);return}if(d!==u){l(s("login.passwordsDontMatch")),t(!1);return}if(d.length<6){l(s("login.passwordTooShort")),t(!1);return}await new Promise(I=>setTimeout(I,1500));const N=M({username:n,email:m,firstName:P,lastName:L});if(!N.success){l(N.message||s("login.registrationFailed"));return}const R=N.user;localStorage.setItem("userData",JSON.stringify(R)),localStorage.setItem("authToken","mock_token_"+Date.now()),window.dispatchEvent(new Event("authStateChanged")),j(s("login.accountCreated")),y({username:"",email:"",password:"",confirmPassword:"",firstName:"",lastName:""}),setTimeout(()=>h("/"),1200)}catch(n){console.error("Registration error:",n),l(s("login.registrationFailed"))}finally{t(!1)}},E=()=>{G(),h("/")};return e.jsx("div",{className:"login-page",children:e.jsx(B,{children:e.jsx(S,{className:"justify-content-center",children:e.jsxs(f,{xs:12,sm:10,md:8,lg:6,xl:5,children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h1",{className:"login-title",children:s("login.title")}),e.jsx("p",{className:"login-subtitle",children:s("login.subtitle")})]})," ",e.jsx(U,{className:"login-card",children:e.jsxs(U.Body,{children:[w&&e.jsx(A,{variant:"danger",className:"mb-3",children:w}),v&&e.jsx(A,{variant:"success",className:"mb-3",children:v}),e.jsxs(K,{activeKey:p,onSelect:r=>r&&O(r),className:"login-tabs nav-justified",fill:!0,children:[e.jsx(T,{eventKey:"login",title:e.jsxs("span",{className:"tab-title",children:[e.jsx("i",{className:"fas fa-sign-in-alt"}),s("login.signIn")]}),children:p==="login"&&e.jsxs(a,{onSubmit:F,className:"mt-3",children:[e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:s("login.emailOrUsername")}),e.jsx(a.Control,{type:"text",name:"emailOrUsername",placeholder:s("login.emailOrUsernamePlaceholder"),value:o.emailOrUsername,onChange:r=>i(r,"login"),required:!0})]}),e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:s("login.password")}),e.jsx(a.Control,{type:"password",name:"password",placeholder:s("login.passwordPlaceholder"),value:o.password,onChange:r=>i(r,"login"),required:!0})]}),e.jsx(b,{variant:"primary",type:"submit",className:"w-100 login-btn mb-3",disabled:x,children:x?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),s("login.signingIn")]}):s("login.signIn")})]})}),e.jsx(T,{eventKey:"register",title:e.jsxs("span",{className:"tab-title",children:[e.jsx("i",{className:"fas fa-user-plus"}),s("login.signUp")]}),children:p==="register"&&e.jsxs(a,{onSubmit:k,className:"mt-3",children:[e.jsxs(S,{children:[e.jsx(f,{md:6,children:e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:s("login.firstName")}),e.jsx(a.Control,{type:"text",name:"firstName",placeholder:s("login.firstNamePlaceholder"),value:c.firstName,onChange:r=>i(r,"register"),required:!0})]})}),e.jsx(f,{md:6,children:e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:s("login.lastName")}),e.jsx(a.Control,{type:"text",name:"lastName",placeholder:s("login.lastNamePlaceholder"),value:c.lastName,onChange:r=>i(r,"register"),required:!0})]})})]}),e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:s("login.username")}),e.jsx(a.Control,{type:"text",name:"username",placeholder:s("login.usernamePlaceholder"),value:c.username,onChange:r=>i(r,"register"),required:!0})]}),e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:s("login.email")}),e.jsx(a.Control,{type:"email",name:"email",placeholder:s("login.emailPlaceholder"),value:c.email,onChange:r=>i(r,"register"),required:!0})]}),e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:s("login.password")}),e.jsx(a.Control,{type:"password",name:"password",placeholder:s("login.passwordPlaceholder"),value:c.password,onChange:r=>i(r,"register"),required:!0})]}),e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:s("login.confirmPassword")}),e.jsx(a.Control,{type:"password",name:"confirmPassword",placeholder:s("login.confirmPasswordPlaceholder"),value:c.confirmPassword,onChange:r=>i(r,"register"),required:!0})]}),e.jsx(b,{variant:"success",type:"submit",className:"w-100 register-btn mb-3",disabled:x,children:x?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),s("login.creatingAccount")]}):s("login.createAccount")})]})})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx(b,{variant:"outline-secondary",size:"sm",onClick:E,className:"guest-btn",children:s("login.continueAsGuest")})})]})}),e.jsx("div",{className:"text-center mt-4",children:e.jsxs("div",{className:"demo-credentials-box",children:[e.jsx("small",{className:"text-muted d-block mb-2",children:e.jsx("strong",{children:"üìù Demo Login Credentials:"})}),e.jsxs("div",{className:"demo-creds-grid",children:[e.jsxs("small",{className:"text-muted",children:[e.jsx("strong",{children:"Admin:"})," admin / admin@company.com"]}),e.jsxs("small",{className:"text-muted",children:[e.jsx("strong",{children:"Creator:"})," mariagarcia / maria.garcia@company.com"]}),e.jsxs("small",{className:"text-muted",children:[e.jsx("strong",{children:"User:"})," johndoe / john.doe@company.com"]})]}),e.jsx("small",{className:"text-muted d-block mt-2",children:e.jsx("em",{children:"Password: any text (demo mode)"})})]})}),e.jsx("div",{className:"text-center mt-3",children:e.jsxs("small",{className:"text-muted",children:[e.jsx(q,{to:"/about",className:"text-decoration-none",children:s("nav.about")})," ‚Ä¢ ",e.jsx(q,{to:"/faq",className:"text-decoration-none",children:s("nav.faq")})]})})]})})})})};export{Z as default};
